# 文档规范规则

本文档定义 dtg-java-skill 插件中文档的编写规范和质量标准。

## 文档类型

### 1. 需求文档

**用途**: 描述产品需求和功能规格

**模板**: [PRD 模板](../templates/prd.md)

**必需章节**:
- 背景和目标
- 功能需求
- 非功能需求
- 用户故事
- 验收标准

### 2. 设计文档

**用途**: 描述系统设计和架构方案

**模板**: [设计文档模板](../templates/design.md)

**必需章节**:
- 概述
- 架构设计
- 接口设计
- 数据模型
- 安全设计

### 3. 架构决策记录 (ADR)

**用途**: 记录重要的架构决策

**模板**: [ADR 模板](../templates/adr.md)

**必需章节**:
- 决策元数据
- 背景和问题
- 决策内容
- 后果分析
- 审查记录

### 4. 技术文档

**用途**: 描述技术实现和操作指南

**类型**:
- API 文档
- 数据库文档
- 部署文档
- 运维文档

---

## 文档格式要求

### Markdown 规范

#### 编码声明
```markdown
<!--
    Encoding: UTF-8
    Language: zh-CN
-->
```

#### 标题层级
```markdown
# 一级标题（文档标题）
## 二级标题（主要章节）
### 三级标题（子章节）
#### 四级标题（细节说明）
```

#### 代码块
````markdown
```java
// Java 代码块
public class Example {
    // 代码
}
```

```bash
# Bash 命令块
mvn clean install
```
````

#### 表格
```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 数据1 | 数据2 | 数据3 |
```

#### 列表
```markdown
- 无序列表项
  - 子项

1. 有序列表项
2. 有序列表项
```

#### 链接
```markdown
[链接文本](相对路径)
[外部链接](https://example.com)
```

---

## 内容要求

### 需求文档

**内容完整性**:
- [ ] 明确的业务目标
- [ ] 完整的功能列表
- [ ] 清晰的用户故事
- [ ] 可验证的验收标准

**质量标准**:
- 使用用户故事格式
- 包含验收标准
- 优先级明确
- 可追踪性

### 设计文档

**内容完整性**:
- [ ] 系统概述
- [ ] 架构图
- [ ] 组件交互
- [ ] 数据模型
- [ ] 接口定义

**质量标准**:
- 图表清晰
- 逻辑一致
- 细节充分
- 可实施性

### 代码文档

**Javadoc 规范**:
```java
/**
 * 用户服务接口
 *
 * 提供用户管理的相关服务
 *
 * @author 开发者
 * @version 1.0.0
 * @since 2024-01-01
 */
public interface UserService {
    /**
     * 根据用户ID查询用户
     *
     * @param userId 用户ID，不能为 null
     * @return 用户信息，不存在返回 null
     * @throws IllegalArgumentException userId 为 null 时抛出
     */
    User findById(Long userId);
}
```

**注释规范**:
```java
// 好的注释
// 检查用户是否已存在
if (userRepository.existsByUsername(username)) {
    throw new UserAlreadyExistsException(username);
}

// 不好的注释
// 检查
if (check) {
    // 处理
}
```

---

## 文档质量标准

### 可读性

**要求**:
- 使用清晰的语言
- 避免歧义表达
- 保持简洁明了
- 使用主动语态

**示例**:
```
好的写法:
"创建用户服务时，需要先验证用户名是否已存在"

不好的写法:
"用户服务创建时用户名验证的需求是被要求的"
```

### 完整性

**检查清单**:
- [ ] 所有必需章节完整
- [ ] 代码示例可运行
- [ ] 链接有效
- [ ] 图片清晰

### 准确性

**验证方法**:
- 技术信息准确
- 代码示例经过测试
- 数据真实可信
- 无过时信息

### 可维护性

**维护策略**:
- 定期审查更新
- 版本控制
- 变更记录
- 审核流程

---

## 文档审查流程

### 编写阶段

1. **创建文档**
   - 使用对应模板
   - 填写所有必需章节
   - 添加代码示例

2. **自审**
   - 检查拼写和语法
   - 验证链接有效性
   - 确认内容完整

### 审查阶段

1. **同行审查**
   - 技术准确性
   - 内容完整性
   - 可读性评估

2. **修改完善**
   - 根据反馈修改
   - 补充缺失内容
   - 优化表达

### 发布阶段

1. **最终审核**
   - 质量检查
   - 格式验证
   - 版本标记

2. **发布**
   - 提交版本控制
   - 更新目录
   - 通知相关人员

---

## 文档存储结构

```
docs/
├── guides/              # 使用指南
│   ├── quickstart.md
│   ├── best-practices.md
│   └── ...
├── rules/               # 规范文档
│   ├── coding-standards.md
│   ├── architecture-principles.md
│   └── ...
├── templates/           # 模板文档
│   ├── prd.md
│   ├── adr.md
│   └── ...
└── decisions/           # 架构决策
    ├── adr-001-xxx.md
    └── ...
```

---

## 文档命名规范

### 文件命名

**格式**: `[type]-[name].md`

**类型前缀**:
- `guide-`: 使用指南
- `rule-`: 规范文档
- `template-`: 模板文档
- `adr-`: 架构决策

**示例**:
```
guide-quickstart.md
rule-coding-standards.md
template-prd.md
adr-001-database-selection.md
```

### 标题命名

**格式**: `# [文档标题]`

**要求**:
- 简洁明了
- 描述准确
- 使用中文
- 避免符号

**示例**:
```markdown
# 快速开始指南
# 编码规范
# 架构原则
```

---

## 文档更新策略

### 更新频率

| 文档类型 | 更新频率 | 触发条件 |
|----------|----------|----------|
| 需求文档 | 每迭代 | 需求变更 |
| 设计文档 | 每季度 | 架构变更 |
| API 文档 | 每周 | 接口变更 |
| 运维文档 | 随时 | 环境变更 |

### 版本管理

```markdown
## 版本历史

| 版本 | 日期 | 作者 | 变更内容 |
|------|------|------|----------|
| 1.0.0 | 2024-01-01 | 张三 | 初始版本 |
| 1.1.0 | 2024-02-01 | 李四 | 新增章节 |
```

### 变更记录

```markdown
---
**变更记录**
- 2024-01-01: 创建文档
- 2024-02-01: 更新技术栈版本
- 2024-03-01: 补充代码示例
---
```

---

## 工具支持

### Markdown 校验

使用工具检查 Markdown 格式：
```bash
# 安装 markdownlint
npm install -g markdownlint-cli

# 检查文档
markdownlint docs/**/*.md
```

### 链接检查

检查文档中的链接：
```bash
# 安装 markdown-link-check
npm install -g markdown-link-check

# 检查链接
markdown-link-check docs/**/*.md
```

### 拼写检查

检查文档拼写：
```bash
# 使用 aspell
aspell check docs/guide/quickstart.md
```

---

## 最佳实践

### 1. 保持文档简洁

**目标**: 用最少的文字传达最多的信息

**方法**:
- 使用列表代替长段落
- 使用表格代替冗长描述
- 使用代码示例代替文字说明
- 使用图表展示复杂关系

### 2. 保持文档一致

**一致性要求**:
- 术语一致
- 格式一致
- 风格一致
- 命名一致

### 3. 保持文档可搜索

**可搜索性**:
- 使用有意义的标题
- 添加关键词
- 使用标签
- 建立索引

### 4. 保持文档可维护

**维护性**:
- 避免重复内容
- 使用引用链接
- 定期更新
- 版本控制

---

## 质量检查清单

### 发布前检查

- [ ] 所有必需章节完整
- [ ] 代码示例可运行
- [ ] 链接全部有效
- [ ] 图片清晰显示
- [ ] 格式符合规范
- [ ] 拼写语法正确
- [ ] 版本号更新

### 定期审查

- [ ] 内容是否过时
- [ ] 技术是否更新
- [ ] 链接是否有效
- [ ] 示例是否正确

---

**相关文档**: [项目上下文](project-context.md) | [编码标准](coding-standards.md)
