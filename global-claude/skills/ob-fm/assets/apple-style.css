/*
 * Apple Style for Obsidian
 * 版本: 2.1.0
 * 更新时间: 2024-01-25
 *
 * 使用方法: 在笔记的 YAML frontmatter 中添加 `cssclass: apple-style`
 *
 * 设计理念:
 * - 简洁: 极简的灰度配色系统，只有一个强调色（蓝色）用于链接
 * - 清晰: 三级标题层次，通过字号、字重、装饰实现视觉区分
 * - 精致: 1.8 行高和 1.2em 段落间距，营造舒适的阅读节奏
 *
 * 作者: ob-fm (Obsidian Apple Style Architect)
 */

/* ============================================
   全局设置
   ============================================ */

/* 应用到带有 apple-style 类的笔记 */
.apple-style {
    /* 字体栈 - Apple 系统字体优先 */
    --font-text: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text",
                 "PingFang SC", "Hiragino Sans GB", "Helvetica Neue", Arial, sans-serif;
    --font-code: "SF Mono", "Menlo", "Monaco", "Consolas", "Liberation Mono", monospace;

    /* 色彩系统 - Apple 官网配色 */
    --color-background: #FFFFFF;
    --color-text: #1D1D1F;
    --color-text-secondary: #6E6E73;
    --color-text-tertiary: #86868B;
    --color-link: #0071E3;
    --color-border: #D2D2D7;
    --color-surface: #F5F5F7;
    --color-code-bg: #FAFAFA;

    /* 字号系统 */
    --font-size-h1: 28px;
    --font-size-h2: 21px;
    --font-size-h3: 18px;
    --font-size-body: 16px;
    --font-size-code: 14px;

    /* 字重系统 */
    --font-weight-h1: 700;
    --font-weight-h2: 600;
    --font-weight-h3: 500;
    --font-weight-body: 400;

    /* 间距系统 - 8px 基准 */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    --spacing-xxl: 48px;

    /* 圆角系统 */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
}

/* ============================================
   基础排版
   ============================================ */

/* 正文样式 */
.apple-style.markdown-preview-view,
.apple-style.markdown-rendered {
    font-family: var(--font-text);
    font-size: var(--font-size-body);
    line-height: 1.8;
    letter-spacing: 0.02em;
    color: var(--color-text);
    background-color: var(--color-background);
    padding: var(--spacing-lg);
}

/* 段落间距 */
.apple-style.markdown-preview-view p,
.apple-style.markdown-rendered p {
    margin-bottom: 1.2em;
    line-height: 1.8;
}

/* 链接样式 */
.apple-style.markdown-preview-view a,
.apple-style.markdown-rendered a {
    color: var(--color-link);
    text-decoration: none;
    transition: opacity 0.2s ease;
}

.apple-style.markdown-preview-view a:hover,
.apple-style.markdown-rendered a:hover {
    text-decoration: underline;
    opacity: 0.8;
}

/* ============================================
   标题系统
   ============================================ */

/* H1 - 主要章节（底部下划线） */
.apple-style.markdown-preview-view h1,
.apple-style.markdown-rendered h1 {
    font-size: var(--font-size-h1);
    font-weight: var(--font-weight-h1);
    line-height: 1.4;
    letter-spacing: -0.3px;
    margin-top: var(--spacing-xxl);
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
    color: var(--color-text);
}

/* H2 - 次级章节（左侧深灰条） */
.apple-style.markdown-preview-view h2,
.apple-style.markdown-rendered h2 {
    font-size: var(--font-size-h2);
    font-weight: var(--font-weight-h2);
    line-height: 1.5;
    letter-spacing: -0.2px;
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-md);
    border-left: 3px solid var(--color-text-secondary);
    color: var(--color-text);
}

/* H3 - 小节标题（仅加粗） */
.apple-style.markdown-preview-view h3,
.apple-style.markdown-rendered h3 {
    font-size: var(--font-size-h3);
    font-weight: var(--font-weight-h3);
    line-height: 1.6;
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-sm);
    color: var(--color-text);
}

/* H4-H6 - 平化处理（使用 H3 样式） */
.apple-style.markdown-preview-view h4,
.apple-style.markdown-rendered h4,
.apple-style.markdown-preview-view h5,
.apple-style.markdown-rendered h5,
.apple-style.markdown-preview-view h6,
.apple-style.markdown-rendered h6 {
    font-size: var(--font-size-h3);
    font-weight: var(--font-weight-h3);
    line-height: 1.6;
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-sm);
    color: var(--color-text);
}

/* ============================================
   列表样式
   ============================================ */

/* 列表容器 */
.apple-style.markdown-preview-view ul,
.apple-style.markdown-rendered ul,
.apple-style.markdown-preview-view ol,
.apple-style.markdown-rendered ol {
    margin: var(--spacing-sm) 0;
    padding-left: var(--spacing-lg);
}

/* 列表项 */
.apple-style.markdown-preview-view li,
.apple-style.markdown-rendered li {
    margin-bottom: var(--spacing-sm);
    line-height: 1.8;
}

/* 嵌套列表 */
.apple-style.markdown-preview-view ul ul,
.apple-style.markdown-rendered ul ul,
.apple-style.markdown-preview-view ol ol,
.apple-style.markdown-rendered ol ol {
    margin-top: var(--spacing-sm);
}

/* 任务列表 */
.apple-style.markdown-preview-view .task-list-item,
.apple-style.markdown-rendered .task-list-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: var(--spacing-sm);
}

.apple-style.markdown-preview-view .task-list-item-checkbox,
.apple-style.markdown-rendered .task-list-item-checkbox {
    margin-top: 6px;
    margin-right: var(--spacing-sm);
}

/* ============================================
   引用块
   ============================================ */

/* 引用块样式 */
.apple-style.markdown-preview-view blockquote,
.apple-style.markdown-rendered blockquote {
    font-size: var(--font-size-body);
    line-height: 1.8;
    color: var(--color-text-secondary);
    background-color: var(--color-surface);
    padding: var(--spacing-md) var(--spacing-lg);
    margin: var(--spacing-md) 0;
    border-left: 3px solid var(--color-border);
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
}

/* 引用块内的段落 */
.apple-style.markdown-preview-view blockquote p,
.apple-style.markdown-rendered blockquote p {
    margin-bottom: var(--spacing-sm);
}

/* ============================================
   代码样式
   ============================================ */

/* 行内代码 */
.apple-style.markdown-preview-view code,
.apple-style.markdown-rendered code {
    font-family: var(--font-code);
    font-size: var(--font-size-code);
    background-color: var(--color-surface);
    color: #C7254E;
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    line-height: 1.6;
}

/* 代码块 */
.apple-style.markdown-preview-view pre,
.apple-style.markdown-rendered pre {
    font-family: var(--font-code);
    font-size: var(--font-size-code);
    line-height: 1.6;
    background-color: var(--color-code-bg);
    border: 1px solid var(--color-border);
    padding: var(--spacing-md) var(--spacing-lg);
    margin: var(--spacing-md) 0;
    border-radius: var(--radius-md);
    overflow-x: auto;
}

/* 代码块内的代码 */
.apple-style.markdown-preview-view pre code,
.apple-style.markdown-rendered pre code {
    background-color: transparent;
    color: var(--color-text);
    padding: 0;
    border-radius: 0;
}

/* ============================================
   Callout 样式
   ============================================ */

/* Callout 容器 */
.apple-style.markdown-preview-view .callout,
.apple-style.markdown-rendered .callout {
    font-size: var(--font-size-body);
    line-height: 1.8;
    background-color: var(--color-surface);
    padding: var(--spacing-md) var(--spacing-lg);
    margin: var(--spacing-md) 0;
    border-left: 3px solid var(--color-border);
    border-radius: var(--radius-md);
}

/* Callout 标题 */
.apple-style.markdown-preview-view .callout-title,
.apple-style.markdown-rendered .callout-title {
    font-weight: var(--font-weight-h2);
    font-size: var(--font-size-body);
    color: var(--color-text);
    margin-bottom: var(--spacing-sm);
}

/* Callout 内容 */
.apple-style.markdown-preview-view .callout-content,
.apple-style.markdown-rendered .callout-content {
    color: var(--color-text-secondary);
}

/* 特定 Callout 类型的颜色 */
.apple-style.markdown-preview-view .callout[data-callout="abstract"],
.apple-style.markdown-rendered .callout[data-callout="abstract"] {
    border-left-color: var(--color-text-secondary);
}

.apple-style.markdown-preview-view .callout[data-callout="note"],
.apple-style.markdown-rendered .callout[data-callout="note"] {
    border-left-color: var(--color-link);
}

.apple-style.markdown-preview-view .callout[data-callout="info"],
.apple-style.markdown-rendered .callout[data-callout="info"] {
    border-left-color: var(--color-text-secondary);
}

.apple-style.markdown-preview-view .callout[data-callout="warning"],
.apple-style.markdown-rendered .callout[data-callout="warning"] {
    border-left-color: #FF9500;
    background-color: #FFF5E6;
}

/* ============================================
   表格样式
   ============================================ */

/* 表格容器 */
.apple-style.markdown-preview-view table,
.apple-style.markdown-rendered table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--spacing-md) 0;
    font-size: var(--font-size-body);
    line-height: 1.8;
}

/* 表头 */
.apple-style.markdown-preview-view th,
.apple-style.markdown-rendered th {
    font-weight: var(--font-weight-h2);
    text-align: left;
    padding: var(--spacing-sm) var(--spacing-md);
    border-bottom: 2px solid var(--color-border);
    color: var(--color-text);
}

/* 表格单元格 */
.apple-style.markdown-preview-view td,
.apple-style.markdown-rendered td {
    padding: var(--spacing-sm) var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
    color: var(--color-text);
}

/* ============================================
   分隔线
   ============================================ */

/* 水平分隔线（章节分隔） */
.apple-style.markdown-preview-view hr,
.apple-style.markdown-rendered hr {
    border: none;
    margin: var(--spacing-lg) 0;
    height: 1px;
    background-color: transparent;
}

/* ============================================
   图片样式
   ============================================ */

/* 图片 */
.apple-style.markdown-preview-view img,
.apple-style.markdown-rendered img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    margin: var(--spacing-md) 0;
}

/* ============================================
   标签样式
   ============================================ */

/* 标签 */
.apple-style.markdown-preview-view a.tag,
.apple-style.markdown-rendered a.tag {
    display: inline-block;
    padding: 2px 8px;
    background-color: var(--color-surface);
    color: var(--color-text-secondary);
    border-radius: var(--radius-sm);
    font-size: 0.9em;
    margin-right: var(--spacing-xs);
    margin-bottom: var(--spacing-xs);
    text-decoration: none;
}

.apple-style.markdown-preview-view a.tag:hover,
.apple-style.markdown-rendered a.tag:hover {
    background-color: var(--color-border);
    color: var(--color-text);
}

/* ============================================
   YAML Frontmatter 样式
   ============================================ */

/* 隐藏 frontmatter（在预览模式中） */
.apple-style.markdown-preview-view frontmatter,
.apple-style.markdown-rendered frontmatter {
    display: none;
}

/* ============================================
   响应式设计
   ============================================ */

/* 移动设备优化 */
@media (max-width: 768px) {
    .apple-style.markdown-preview-view,
    .apple-style.markdown-rendered {
        padding: var(--spacing-md);
        font-size: 14px;
    }

    .apple-style.markdown-preview-view h1,
    .apple-style.markdown-rendered h1 {
        font-size: 22px;
        margin-top: var(--spacing-xl);
    }

    .apple-style.markdown-preview-view h2,
    .apple-style.markdown-rendered h2 {
        font-size: 18px;
        margin-top: var(--spacing-lg);
    }

    .apple-style.markdown-preview-view h3,
    .apple-style.markdown-rendered h3 {
        font-size: 16px;
    }
}

/* ============================================
   打印样式
   ============================================ */

@media print {
    .apple-style.markdown-preview-view,
    .apple-style.markdown-rendered {
        color: #000;
        background-color: #fff;
    }

    .apple-style.markdown-preview-view a,
    .apple-style.markdown-rendered a {
        color: #000;
        text-decoration: underline;
    }

    .apple-style.markdown-preview-view pre,
    .apple-style.markdown-rendered pre {
        background-color: #f5f5f5;
        border: 1px solid #ddd;
    }
}

/* ============================================
   辅助类
   ============================================ */

/* 文本对齐 */
.apple-style.text-center {
    text-align: center;
}

.apple-style.text-left {
    text-align: left;
}

.apple-style.text-right {
    text-align: right;
}

/* 间距辅助类 */
.apple-style.mt-0 { margin-top: 0; }
.apple-style.mt-sm { margin-top: var(--spacing-sm); }
.apple-style.mt-md { margin-top: var(--spacing-md); }
.apple-style.mt-lg { margin-top: var(--spacing-lg); }

.apple-style.mb-0 { margin-bottom: 0; }
.apple-style.mb-sm { margin-bottom: var(--spacing-sm); }
.apple-style.mb-md { margin-bottom: var(--spacing-md); }
.apple-style.mb-lg { margin-bottom: var(--spacing-lg); }

/* ============================================
   Dataview 集成
   ============================================ */

/* Dataview 查询结果 */
.apple-style.markdown-preview-view .dataview,
.apple-style.markdown-rendered .dataview {
    font-size: var(--font-size-body);
    line-height: 1.8;
}

/* Dataview 表格 */
.apple-style.markdown-preview-view .dataview.table-view-table,
.apple-style.markdown-rendered .dataview.table-view-table {
    border-collapse: collapse;
}

/* Dataview 列表 */
.apple-style.markdown-preview-view .dataview ul,
.apple-style.markdown-rendered .dataview ul {
    list-style-type: disc;
    padding-left: var(--spacing-lg);
}

/* ============================================
   主题兼容性
   ============================================ */

/* 确保在深色主题下也能正常工作（可选） */
@media (prefers-color-scheme: dark) {
    /* 如需深色模式支持，可以在此添加覆盖样式 */
    /* 当前版本专注于浅色 Apple 官网风格 */
}

/* ============================================
   结束
   ============================================ */
