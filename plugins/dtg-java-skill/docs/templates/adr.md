# 架构决策记录 (ADR) 模板

架构决策记录 (Architecture Decision Record) 是记录重要架构决策的文档，帮助团队理解决策背后的原因和权衡。

---

## 决策元数据

| 项目 | 内容 |
|------|------|
| **决策编号** | ADR-001 |
| **决策标题** | [决策的简短标题] |
| **决策日期** | [YYYY-MM-DD] |
| **决策状态** | [提议 / 已接受 / 已弃用 / 已替代] |
| **决策者** | [决策者姓名/团队] |
| **影响范围** | [受影响的模块/服务] |

---

## 背景

### 问题描述

[清晰描述需要解决的问题或面临的挑战]

**现状分析**:
- 当前状况: [描述当前状况]
- 存在问题: [列出具体问题]
- 影响范围: [说明问题影响]

**业务驱动**:
- 业务需求: [描述业务需求]
- 技术约束: [列出技术约束]
- 资源限制: [说明资源限制]

### 决策触发因素

[是什么触发了这个决策？]
- 性能问题
- 可扩展性需求
- 技术债务
- 团队能力
- 业务变化

---

## 决策内容

### 考虑的方案

#### 方案 A: [方案名称]

**描述**: [简要描述方案]

**优点**:
- 优点1
- 优点2
- 优点3

**缺点**:
- 缺点1
- 缺点2

**成本评估**: [实施成本]

#### 方案 B: [方案名称]

**描述**: [简要描述方案]

**优点**:
- 优点1
- 优点2

**缺点**:
- 缺点1
- 缺点2

**成本评估**: [实施成本]

#### 方案 C: [方案名称]

[按照相同格式描述]

### 方案对比

| 评估维度 | 方案 A | 方案 B | 方案 C |
|----------|--------|--------|--------|
| 实施难度 | 简单 | 中等 | 复杂 |
| 开发成本 | 低 | 中 | 高 |
| 性能影响 | 无 | 小 | 大 |
| 可维护性 | 高 | 中 | 低 |
| 扩展性 | 低 | 中 | 高 |
| 团队熟悉度 | 熟悉 | 一般 | 陌生 |
| 风险评估 | 低 | 中 | 高 |

### 选择的方案

**最终决策**: **方案 [X] - [方案名称]**

**决策理由**:
1. [理由1]
2. [理由2]
3. [理由3]

**权衡取舍**:
- [接受的权衡1]
- [接受的权衡2]

---

## 技术选型

### 核心技术

| 技术 | 版本 | 用途 | 选择理由 |
|------|------|------|----------|
| [技术1] | [版本] | [用途] | [理由] |
| [技术2] | [版本] | [用途] | [理由] |

### 架构模式

**采用的模式**: [例如：分层架构 / 六边形架构 / CQRS / 事件驱动]

**模式描述**:
[简要描述如何应用该模式]

**示例代码**:
```java
// 架构模式示例代码
[展示关键实现]
```

---

## 实施方案

### 实施步骤

#### 阶段 1: 准备阶段（1-2周）
- [ ] 任务1
- [ ] 任务2
- [ ] 任务3

**交付物**:
- [交付物1]
- [交付物2]

#### 阶段 2: 实施阶段（4-6周）
- [ ] 任务1
- [ ] 任务2

**交付物**:
- [交付物1]

#### 阶段 3: 验证阶段（2周）
- [ ] 任务1
- [ ] 任务2

**验收标准**:
- [标准1]
- [标准2]

### 迁移策略

**迁移方式**:
- [ ] 新旧并存，逐步切换
- [ ] 直接替换，一次性切换
- [ ] 功能开关，灰度发布

**回滚方案**:
[描述如果出现问题如何回滚]

---

## 后果分析

### 正面影响

#### 业务价值
- [价值1]: [描述]
- [价值2]: [描述]

#### 技术价值
- [价值1]: [描述]
- [价值2]: [描述]

#### 团队价值
- [价值1]: [描述]
- [价值2]: [描述]

### 负面影响

#### 潜在风险
1. **风险1**: [描述风险]
   - **可能性**: [高/中/低]
   - **影响**: [高/中/低]
   - **缓解措施**: [具体措施]

2. **风险2**: [描述风险]
   - **可能性**: [高/中/低]
   - **影响**: [高/中/低]
   - **缓解措施**: [具体措施]

#### 已知限制
- [限制1]: [描述限制]
- [限制2]: [描述限制]

### 负面影响处理

**补偿措施**:
- [措施1]: [如何补偿负面影响]
- [措施2]: [如何补偿负面影响]

**监控指标**:
- [指标1]: [需要监控的指标]
- [指标2]: [需要监控的指标]

---

## 替代方案

### 如果决策失败

**Plan B**: [备选方案]
- [备选方案描述]

**切换时机**: [何时切换到备选方案]

**切换成本**: [评估切换成本]

### 未来演进

**可能的改进方向**:
1. [改进方向1]: [描述]
2. [改进方向2]: [描述]

**新技术的考虑**:
- [新技术1]: [评估是否在未来考虑]
- [新技术2]: [评估是否在未来考虑]

---

## 决策审查

### 审查计划

| 审查时间 | 审查人 | 审查结果 | 备注 |
|----------|--------|----------|------|
| [日期] | [姓名] | [通过/调整] | [备注] |
| [日期] | [姓名] | [通过/调整] | [备注] |

### 效果评估

**评估指标**:
- [指标1]: [目标值] - 当前值: [实际值]
- [指标2]: [目标值] - 当前值: [实际值]

**评估结果**: [是否达到预期]

---

## 相关决策

### 相关 ADR

- [ADR-XXX]: [相关决策链接]
- [ADR-XXX]: [相关决策链接]

### 依赖关系

**前置决策**:
- [ADR-XXX]: [必须先实施的决策]

**后续决策**:
- [ADR-XXX]: [基于此决策的后续决策]

---

## 参考资源

### 技术资料
- [文档1]: [URL]
- [文档2]: [URL]

### 团队讨论
- [会议记录]: [链接]
- [邮件讨论]: [链接]

### 外部参考
- [参考案例1]: [URL]
- [参考案例2]: [URL]

---

**文档状态**: [活跃 / 归档]

*最后更新: [YYYY-MM-DD]*
*更新人: [姓名]*

---

## 使用说明

### 何时创建 ADR

在以下情况下应该创建 ADR：
- 选择新的技术栈或框架
- 重要的架构设计决策
- 影响多个系统的决策
- 有重大权衡取舍的决策
- 团队可能需要回顾的决策

### ADR 状态

- **提议**: 决策正在讨论中
- **已接受**: 决策已通过并正在实施
- **已弃用**: 决策不再使用但未替代
- **已替代**: 被新决策替代

### ADR 模板使用

1. 复制此模板
2. 填写决策相关内容
3. 删除不需要的部分
4. 保存到 `docs/decisions/` 目录

---

**相关文档**: [架构原则](../rules/architecture-principles.md) | [最佳实践](../guides/best-practices.md)
