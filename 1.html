<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Demo</title>
    <!-- 请勿在项目正式环境中引用该 layui.css 地址 -->
    <link href="//unpkg.com/layui@2.13.2/dist/css/layui.css" rel="stylesheet" />
</head>

<body>
    <script id="ID-demo-tpl-header" type="text/html">
      <div>头部公共模板</div>
    </script>
    <script id="ID-demo-tpl-list" type="text/html">
      <ul>
        {{ d.items.forEach(function(item, index) { }}
        <li>
          <span>{{= item.title }}</span>
          {{ if(item.children) { }} {{- include('ID-demo-tpl-list', { items:
          item.children }) }} {{ } }}
        </li>
        {{ }); }}
      </ul>
    </script>
    <script id="ID-demo-tpl-main" type="text/html">
      {{- include('ID-demo-tpl-header') }}
      <h3>循环输出：</h3>
      {{- include('ID-demo-tpl-list', { items: d.items }) }}
    </script>
    <div id="ID-demo-view"></div>

    <!-- 请勿在项目正式环境中引用该 layui.js 地址 -->
    <script src="//unpkg.com/layui@2.13.2/dist/layui.js"></script>
    <script>
        layui.use(function () {
            var laytpl = layui.laytpl;
            var template = document.getElementById("ID-demo-tpl-main").innerHTML; // 获取模板字符
            var target = document.getElementById("ID-demo-view"); // 输出结果的目标元素
            var data = {
                items: [
                    {
                        title: "list 1",
                        children: [
                            { title: "list 1-1", children: [{ title: "list 1-1-1" }] },
                            { title: "list 1-2" },
                        ],
                    },
                    {
                        title: "list 2",
                        children: [{ title: "list 2-1" }]
                    },
                    { title: "list 3" },
                ],
            };
            // 创建模板实例
            var templateInst = laytpl(template, {
                tagStyle: "modern", // 采用新版本的标签风格
            });
            // 渲染并输出结果
            templateInst.render(data, function (html) {
                target.innerHTML = html;
            });
        });
    </script>
</body>

</html>