# 智能功能指南

dtg-java-skill 插件集成了强大的 AI 功能，为 Spring Boot 2.7 + Dubbo 3 微服务开发提供智能化支持。

## AI 代理系统

插件包含多个专门的 AI 代理，每个代理负责特定的任务领域。

### 1. 需求分析代理

**职责**: 智能评估分布式系统规模和确定微服务边界

**功能**:
- 分析用户需求并确定实现范围
- 评估任务复杂度和影响范围
- 识别涉及的微服务模块
- 制定实施计划和优先级

**使用方式**:
```
"我需要实现一个支付功能，帮我分析需求"
```

**输出示例**:
```
需求分析结果:
- 影响模块: xxpay-pay, xxpay-service
- 复杂度: 中等
- 预估工作量: 4-6 小时
- 依赖关系: 需要先完成支付核心模块
```

### 2. 任务执行代理

**职责**: 执行 Spring Boot 2.7 + Dubbo 3 微服务实现任务

**功能**:
- 生成符合最佳实践的代码
- 创建必要的配置文件
- 实现业务逻辑层
- 添加必要的测试代码

**使用方式**:
```
"创建一个用户管理服务"
```

**输出内容**:
- Entity/DTO 类
- Controller/Service/Repository 层
- Dubbo 服务接口
- 单元测试

### 3. 智能代码审查代理

**职责**: AI 驱动的代码审查，集成智能架构分析和问题诊断

**功能**:
- 检查代码质量
- 识别潜在问题
- 提供优化建议
- 评估架构合理性

**使用方式**:
```
"审查我的代码"
"code review"
```

**审查维度**:
- Spring Boot 2.7 最佳实践
- Dubbo 3 微服务规范
- 安全漏洞检查
- 性能问题识别

### 4. 智能问题诊断代理

**职责**: AI 驱动的深度问题诊断，自动识别代码异味和性能瓶颈

**功能**:
- 代码异味检测
- 性能瓶颈分析
- 并发问题识别
- 内存泄漏风险评估

**使用方式**:
```
"诊断我的代码问题"
"分析性能瓶颈"
```

**诊断类型**:
- 长方法、大类、重复代码
- N+1 查询、缓存问题
- 线程安全、死锁风险
- 配置问题、依赖冲突

### 5. 智能架构分析代理

**职责**: AI 驱动的微服务架构评估，基于 DDD 原则和最佳实践

**功能**:
- 微服务边界评估
- 架构模式识别
- 性能架构分析
- 容错能力评估

**使用方式**:
```
"分析我的微服务架构"
"评估服务边界"
```

**分析内容**:
- DDD 限界上下文划分
- 服务耦合度分析
- 数据一致性策略
- 扩展性评估

## 智能分析能力

### 智能问题诊断

#### 代码异味识别
- **长方法**: 超过 50 行的方法
- **大类**: 超过 500 行的类
- **重复代码**: 相似的代码片段
- **深层嵌套**: 超过 3 层的嵌套
- **参数过多**: 超过 5 个参数的方法

#### 性能瓶颈预测
- **数据库**: N+1 查询、缺少索引
- **内存**: 大对象创建、缓存缺失
- **并发**: 线程池配置、锁竞争
- **网络**: Dubbo 调用频率、数据传输量

#### 安全漏洞扫描
- SQL 注入风险
- XSS 攻击面
- CSRF 防护
- 敏感信息泄露
- 认证授权缺陷

### 智能架构分析

#### 微服务边界评估
基于 DDD 原则评估服务拆分：
- 限界上下文是否清晰
- 业务能力是否完整
- 服务粒度是否合理
- 数据一致性边界

#### 架构模式识别
识别常见架构模式：
- 分层架构
- 六边形架构
- CQRS 模式
- 事件驱动架构
- Saga 模式

#### 性能架构评估
- 缓存策略合理性
- 数据库读写分离
- 消息队列使用
- 连接池配置

#### 容错架构分析
- 熔断机制
- 降级策略
- 重试机制
- 限流保护

### 智能质量门

#### 版本兼容性检查
- Spring Boot 2.7.18
- Dubbo 3.2.14
- MyBatis-Plus 3.5.7
- Java 11

#### 项目结构验证
- 分层架构完整性
- 配置文件完整性
- 测试覆盖率
- 文档完整性

## 代理协作流程

AI 代理之间可以协同工作，提供全面的分析和开发支持。

### 典型工作流

```
用户需求
    ↓
[需求分析代理] → 分析需求、确定范围
    ↓
[任务执行代理] → 生成代码、实现功能
    ↓
[代码审查代理] → 审查代码、检查质量
    ↓
[架构分析代理] → 评估架构、提供建议
    ↓
[问题诊断代理] → 诊断问题、优化代码
```

### 实时反馈

每个代理在执行任务时会提供实时反馈：
- 进度更新
- 发现的问题
- 改进建议
- 参考资源

## 智能建议生成

基于项目上下文和历史记录，插件会生成个性化的建议：

### 代码优化建议
- 重构建议
- 性能优化
- 安全加固
- 最佳实践应用

### 架构演进建议
- 服务拆分方案
- 技术栈升级
- 扩展性改进
- 容错能力提升

## 持续学习

插件会从项目中学习，不断提升建议质量：
- 识别项目特定模式
- 适应团队编码风格
- 记录常见问题
- 积累解决方案知识库

## 配置智能分析

您可以在 `.claude/dtg-java-skill.local.md` 中配置智能分析选项：

```yaml
---
analysis:
  codeReview:
    enabled: true
    severity: "high"
  architectureAnalysis:
    enabled: true
    dddLevel: "strict"
  problemDiagnosis:
    enabled: true
    performanceThreshold: "medium"
---
```

---

**了解更多**: 查看具体的代理文档和架构分析指南获取详细信息。
