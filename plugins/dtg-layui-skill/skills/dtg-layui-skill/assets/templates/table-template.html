<table id="{{tableId}}" lay-filter="{{tableFilter}}"></table>

<!-- 头部工具条 -->
<script type="text/html" id="toolbarTpl">
  {{toolbar}}
</script>

<!-- 行工具条 -->
<script type="text/html" id="barTpl">
  {{actionBar}}
</script>

<script>
layui.use(['table', 'layer', 'form'], function(){
  var table = layui.table;
  var layer = layui.layer;
  var form = layui.form;

  table.render({
    elem: '#{{tableId}}',
    url: '{{dataUrl}}',
    toolbar: '#toolbarTpl',
    page: true,
    cols: [[
      {{tableColumns}}
    ]]
  });

  {{tableScript}}

  // 头部工具条事件
  table.on('toolbar({{tableFilter}})', function(obj){
    var checkStatus = table.checkStatus(obj.config.id);
    var data = checkStatus.data;

    if(obj.event === 'add'){
      layer.open({
        type: 1,
        title: '添加',
        content: '添加表单...'
      });
    } else if(obj.event === 'delete'){
      if(data.length === 0){
        layer.msg('请选择要删除的数据');
      } else {
        layer.confirm('确定删除选中的 ' + data.length + ' 条数据吗？', function(index){
          // 发送删除请求
          layer.close(index);
        });
      }
    }
  });

  // 行工具事件
  table.on('tool({{tableFilter}})', function(obj){
    var data = obj.data;

    if(obj.event === 'del'){
      layer.confirm('真的删除行么', function(index){
        // 发送删除请求
        obj.del();
        layer.close(index);
      });
    } else if(obj.event === 'edit'){
      layer.open({
        type: 1,
        title: '编辑',
        content: '编辑表单...'
      });
    }
  });
});
</script>
