---
name: settings-fix
description: æ£€æµ‹å’Œä¿®å¤ Claude Code ç³»ç»Ÿè®¾ç½®æ–‡ä»¶ä¸­çš„æ’ä»¶åç§°ä¸åŒ¹é…é—®é¢˜
argument-hint: [--auto-fix] [--dry-run] [--settings-path path] [--format text|json]
allowed-tools: Read, Write, Bash
---

# Settings.json ä¿®å¤æŒ‡ä»¤

## æŒ‡ä»¤ç”¨é€”

ä¸“é—¨æ£€æµ‹å’Œä¿®å¤ `~/.claude/settings.json` ä¸­çš„æ’ä»¶åç§°ä¸ä¸€è‡´é—®é¢˜ï¼Œç¡®ä¿ç³»ç»Ÿè®¾ç½®ä¸ marketplace é…ç½®ä¿æŒåŒæ­¥ã€‚

## å‚æ•°è¯´æ˜

- `--auto-fix`: è‡ªåŠ¨ä¿®å¤æ£€æµ‹åˆ°çš„é”™è¯¯
- `--dry-run`: é¢„è§ˆä¿®å¤æ“ä½œï¼Œä¸å®é™…æ‰§è¡Œ
- `--settings-path`: æŒ‡å®š settings.json æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ï¼š~/.claude/settings.jsonï¼‰
- `--format`: è¾“å‡ºæ ¼å¼ï¼Œæ”¯æŒ `text` æˆ– `json`

## æ£€æµ‹çš„é—®é¢˜ç±»å‹

### 1. æ’ä»¶åç§°ä¸åŒ¹é…

**é—®é¢˜æè¿°**ï¼š
- settings.json ä¸­çš„æ’ä»¶åç§°ä¸ marketplace.json ä¸ä¸€è‡´
- é©¼å³°å¼å‘½å vs kebab-case å‘½åå†²çª
- å¤§å°å†™ä¸åŒ¹é…

**ç¤ºä¾‹é”™è¯¯**ï¼š
```json
// settings.json (é”™è¯¯)
{
  "enabledPlugins": {
    "thirdpartyPayChannel@yudady-skills": true  // âŒ é©¼å³°å¼
  }
}

// marketplace.json (æ­£ç¡®)
{
  "plugins": [
    {
      "name": "thirdparty-pay-channel"  // âœ… kebab-case
    }
  ]
}
```

**ä¿®å¤ç­–ç•¥**ï¼š
- è‡ªåŠ¨åŒ¹é…æ­£ç¡®çš„æ’ä»¶åç§°
- ç»Ÿä¸€ä½¿ç”¨ kebab-case å‘½åè§„èŒƒ
- ä¿æŒæ’ä»¶å¯ç”¨çŠ¶æ€ä¸å˜

### 2. æ’ä»¶çŠ¶æ€é”™è¯¯

**é—®é¢˜æè¿°**ï¼š
- æ’ä»¶çŠ¶æ€ä¸æ˜¯å¸ƒå°”å€¼
- æ•°æ®ç±»å‹ä¸æ­£ç¡®

**ä¿®å¤ç­–ç•¥**ï¼š
- å°†éå¸ƒå°”å€¼è½¬æ¢ä¸ºæ­£ç¡®çš„å¸ƒå°”ç±»å‹
- ä¿æŒç”¨æˆ·çš„å¯ç”¨åå¥½

### 3. ç¼ºå¤±æ’ä»¶å¤„ç†

**é—®é¢˜æè¿°**ï¼š
- settings.json ä¸­å¯ç”¨äº†ä¸å­˜åœ¨çš„æ’ä»¶
- æ’ä»¶ç›®å½•å·²è¢«åˆ é™¤ä½†é…ç½®ä»å­˜åœ¨

**ä¿®å¤ç­–ç•¥**ï¼š
- ç¦ç”¨ç¼ºå¤±çš„æ’ä»¶
- æä¾›æ¸…ç†å»ºè®®

## æ‰§è¡Œæ­¥éª¤

### 1. è®¾ç½®æ–‡ä»¶æ£€æµ‹
- è¯»å– `~/.claude/settings.json` æ–‡ä»¶
- éªŒè¯ JSON æ ¼å¼æ­£ç¡®æ€§
- æ£€æŸ¥ enabledPlugins å­—æ®µç»“æ„

### 2. æ’ä»¶åç§°æ¯”å¯¹
- è¯»å– marketplace.json è·å–æ­£ç¡®æ’ä»¶åç§°
- ä½¿ç”¨æ™ºèƒ½åŒ¹é…ç®—æ³•è¯†åˆ«ä¸ä¸€è‡´
- æ”¯æŒå¤šç§å‘½åæ ¼å¼è½¬æ¢

### 3. ç”Ÿæˆä¿®å¤è®¡åˆ’
- åˆ—å‡ºæ‰€æœ‰éœ€è¦ä¿®å¤çš„é—®é¢˜
- æŒ‰ä¸¥é‡ç¨‹åº¦æ’åº
- æä¾›è¯¦ç»†çš„ä¿®å¤å»ºè®®

### 4. æ‰§è¡Œä¿®å¤æ“ä½œ
- åˆ›å»ºè®¾ç½®æ–‡ä»¶å¤‡ä»½
- æŒ‰è®¡åˆ’æ‰§è¡Œä¿®å¤
- éªŒè¯ä¿®å¤ç»“æœ

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€æ£€æµ‹
```bash
# æ£€æµ‹è®¾ç½®æ–‡ä»¶é—®é¢˜
/settings-fix

# é¢„è§ˆä¿®å¤æ“ä½œ
/settings-fix --dry-run
```

### è‡ªåŠ¨ä¿®å¤
```bash
# è‡ªåŠ¨ä¿®å¤æ‰€æœ‰é—®é¢˜
/settings-fix --auto-fix

# æŒ‡å®šè®¾ç½®æ–‡ä»¶è·¯å¾„
/settings-fix --settings-path /custom/path/settings.json --auto-fix
```

### ä¸åŒè¾“å‡ºæ ¼å¼
```bash
# æ–‡æœ¬æ ¼å¼ï¼ˆé»˜è®¤ï¼‰
/settings-fix --format text

# JSON æ ¼å¼
/settings-fix --format json
```

## è¾“å‡ºç¤ºä¾‹

### æ£€æµ‹æŠ¥å‘Š
```
ğŸ” settings.json æ£€æµ‹å®Œæˆ - å‘ç° 1 ä¸ªé—®é¢˜

âŒ é”™è¯¯ (1 ä¸ª):
   - settings.json:thirdpartyPayChannel@yudady-skills
     é—®é¢˜: æ’ä»¶åç§°ä¸åŒ¹é…: thirdpartyPayChannel â†’ thirdparty-pay-channel
     ä¿®å¤: thirdpartyPayChannel â†’ thirdparty-pay-channel
     çŠ¶æ€: å¯è‡ªåŠ¨ä¿®å¤
```

### ä¿®å¤æŠ¥å‘Š
```
ğŸ”§ ä¿®å¤ç»“æœ:
   âœ… æˆåŠŸ: 1
   âŒ å¤±è´¥: 0
   â³ å¾…å¤„ç†: 0

âœ… å·²ä¿®å¤æ’ä»¶åç§°: thirdpartyPayChannel@yudady-skills â†’ thirdparty-pay-channel@yudady-skills

ğŸ“‹ å»ºè®®:
   - é‡å¯ Claude Code ä»¥é‡æ–°åŠ è½½æ’ä»¶
   - è¿è¡Œ /plugin å‘½ä»¤éªŒè¯ä¿®å¤ç»“æœ
```

## å®‰å…¨ç‰¹æ€§

### è‡ªåŠ¨å¤‡ä»½
- ä¿®å¤å‰è‡ªåŠ¨åˆ›å»ºå¤‡ä»½æ–‡ä»¶
- æŒ‰æ—¶é—´æˆ³å‘½åå¤‡ä»½
- æ”¯æŒä¸€é”®å›æ»š

### é¢„è§ˆæ¨¡å¼
- `--dry-run` é€‰é¡¹å®‰å…¨é¢„è§ˆ
- è¯¦ç»†æ˜¾ç¤ºå°†è¦æ‰§è¡Œçš„æ“ä½œ
- ä¸ä¼šä¿®æ”¹ä»»ä½•æ–‡ä»¶

### éªŒè¯æœºåˆ¶
- ä¿®å¤åè‡ªåŠ¨éªŒè¯è¯­æ³•
- ç¡®ä¿é…ç½®æ ¼å¼æ­£ç¡®
- ç»´æŠ¤æ•°æ®å®Œæ•´æ€§

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**æ— æ³•è¯»å– settings.json**ï¼š
```
âŒ é”™è¯¯: settings.json æ–‡ä»¶ä¸å­˜åœ¨: /Users/user/.claude/settings.json
```
**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œæƒé™

**JSON è¯­æ³•é”™è¯¯**ï¼š
```
âŒ é”™è¯¯: settings.json JSON è¯­æ³•é”™è¯¯: Expecting ',' delimiter at line 10
```
**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `--auto-fix` è‡ªåŠ¨ä¿®å¤è¯­æ³•

### è°ƒè¯•æ¨¡å¼
```bash
# æ˜¾ç¤ºè¯¦ç»†è°ƒè¯•ä¿¡æ¯
/settings-fix --dry-run --format json
```

## é«˜çº§åŠŸèƒ½

### æ™ºèƒ½å‘½ååŒ¹é…
æ”¯æŒå¤šç§å‘½åæ ¼å¼çš„è‡ªåŠ¨è½¬æ¢ï¼š
- é©¼å³°å¼ï¼š`thirdpartyPayChannel` â†’ `thirdparty-pay-channel`
- è›‡å½¢ï¼š`thirdparty_pay_channel` â†’ `thirdparty-pay-channel`
- å¸•æ–¯å¡ï¼š`ThirdpartyPayChannel` â†’ `thirdparty-pay-channel`

### æ‰¹é‡å¤„ç†
- ä¸€æ¬¡ä¿®å¤æ‰€æœ‰æ’ä»¶åç§°é—®é¢˜
- ä¿æŒæ’ä»¶çŠ¶æ€é…ç½®
- ç»´æŠ¤ marketplace å…³è”

### é›†æˆæ”¯æŒ
- ä¸ `/skill-fix` å‘½ä»¤æ— ç¼é›†æˆ
- æ”¯æŒç»¼åˆé”™è¯¯æ£€æµ‹
- ç»Ÿä¸€çš„ä¿®å¤æŠ¥å‘Šæ ¼å¼

## æ³¨æ„äº‹é¡¹

1. **æƒé™è¦æ±‚**ï¼šç¡®ä¿å¯¹ settings.json æ–‡ä»¶æœ‰è¯»å†™æƒé™
2. **å¤‡ä»½é‡è¦æ€§**ï¼šé‡è¦é…ç½®å»ºè®®æ‰‹åŠ¨å¤‡ä»½
3. **é‡å¯ç”Ÿæ•ˆ**ï¼šä¿®å¤åéœ€è¦é‡å¯ Claude Code
4. **éªŒè¯ç»“æœ**ï¼šä¿®å¤åå»ºè®®è¿è¡Œ `/plugin` å‘½ä»¤éªŒè¯

## ç›¸å…³å‘½ä»¤

- `/skill-fix` - ç»¼åˆæŠ€èƒ½é”™è¯¯ä¿®å¤
- `/skill-validate` - æŠ€èƒ½éªŒè¯å’Œæ£€æŸ¥
- `/skill-list-enhanced` - å¢å¼ºæŠ€èƒ½åˆ—è¡¨æ˜¾ç¤º